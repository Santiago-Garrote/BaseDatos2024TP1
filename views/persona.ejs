<!DOCTYPE html>

<html>

    <head>
        <title>Películas con <%= personName %></title>
        <link rel="stylesheet" href="/styles.css">
    </head>

    <% var isActorIn = 0;
    var isDirectorIn = 0;%>

    <% movies.forEach(movie => {
        if (movie.isActor) {
            isActorIn++;
        }
        if (movie.isDirector) {
            isDirectorIn++;
        }
    })
        %>


    <body>
        <h1><%= personName %></h1>

        <h1>Películas actuadas por <%= personName %></h1>
        <% if (isActorIn === 0) { %>
            <p>Esta persona no actúa en ninguna película.</p>
        <% } else {%>
            <ul>
                <%movies.sort((a, b) => new Date(b.release_date) - new Date(a.release_date)).forEach((movie) => { %>
                    <% if (movie.isActor) { %>
                        <li><a href="/pelicula/<%= movie.movie_id %>"><%= movie.title %> (<%= new Date(movie.release_date).getFullYear() %>)</a></li>
                    <% } %>
                <% }); %>
            </ul>
        <% } %>

    <h1>Películas dirigidas por <%= personName %></h1>
        <% if (isDirectorIn === 0) { %>
            <p>Esta persona no dirigió ninguna película.</p>
        <% } else { %>
            <ul>
                <%movies.sort((a, b) => new Date(b.release_date) - new Date(a.release_date)).forEach((movie) => { %>
                    <% if (movie.isDirector) { %>
                        <li><a href="/pelicula/<%= movie.movie_id %>"><%= movie.title %> (<%= new Date(movie.release_date).getFullYear() %>)</a></li>
                    <% } %>
                <% }); %>
            </ul>
        <% } %>

    <div id="inicio"><a href="/">Inicio</a></div>

    <script>
        const coll = document.getElementsByClassName('collapsible');
        for (let i = 0; i < coll.length; i++) {
            coll[i].addEventListener('click', function () {
                this.classList.toggle('active');
                const content = this.nextElementSibling;
                if (content.style.display === 'block') {
                    content.style.display = 'none';
                } else {
                    content.style.display = 'block';
                }
            });
        }
    </script>

    </body>
</html>